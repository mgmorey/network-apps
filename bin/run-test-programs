#!/bin/sh -eu

run_test_program() (
    basename="$(basename "$filename" .exe)"
    dirname="$(dirname "$filename")"
    logname="$basename.log"
    cd "$dirname"
    "./$basename" >"$logname"
)

if [ -z "${HOSTNAME-}" ]; then
    export HOSTNAME=$(hostname)
fi

for filename in "$@"; do
    run_test_program "$filename"
done
